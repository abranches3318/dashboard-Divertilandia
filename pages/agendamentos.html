<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Agendamentos - Divertil칙ndia</title>
  <link rel="stylesheet" href="css/dashboard.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
  <!-- Header -->
  <header class="topbar">
    <h1>Agendamentos</h1>
    <div class="top-right">
      <div class="notif" onclick="abrirNotificacoes()">
        游댒 <span id="notif-count">0</span>
      </div>
      <div class="user-info">
        <span id="user-name">Usu치rio</span>
      </div>
    </div>
  </header>

  <main class="content">
    <!-- Novo Agendamento -->
    <div class="topo-secao" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
      <h2>Agendamentos</h2>
      <button id="btnNovoAgendamento" class="btn">+ Novo Agendamento</button>
    </div>

    <!-- Filtros -->
    <div class="filtros-agendamentos" style="display:flex; flex-wrap:wrap; gap:12px; margin-bottom:15px;">
      <div class="campo-filtro">
        <label for="filtroData">Data</label>
        <input type="date" id="filtroData">
      </div>
      <div class="campo-filtro">
        <label for="filtroCliente">Cliente</label>
        <input type="text" id="filtroCliente" placeholder="Nome do cliente">
      </div>
      <div class="campo-filtro">
        <label for="filtroTelefone">Telefone</label>
        <input type="text" id="filtroTelefone" placeholder="(DDD) 9XXXX-XXXX">
      </div>
      <div class="campo-filtro">
        <label for="filtroStatus">Status</label>
        <select id="filtroStatus">
          <option value="">Todos</option>
          <option value="pendente">Pendente</option>
          <option value="confirmado">Confirmado</option>
          <option value="concluido">Conclu칤do</option>
          <option value="cancelado">Cancelado</option>
        </select>
      </div>
      <div style="align-self:end;">
        <button id="btnFiltrarAgendamentos" class="btn">Filtrar</button>
      </div>
    </div>

    <!-- Tabela de Agendamentos -->
    <div style="overflow-x:auto;">
      <table class="tabela-agendamentos" style="width:100%;">
        <thead>
          <tr>
            <th>Data</th>
            <th>Cliente</th>
            <th>Telefone</th>
            <th>Status</th>
            <th>Pacote / Item</th>
            <th>Valor</th>
            <th>A칞칫es</th>
          </tr>
        </thead>
        <tbody id="listaAgendamentos">
          <!-- Preenchido dinamicamente pelo agendamentos.js -->
        </tbody>
      </table>
    </div>
  </main>

  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>

  <!-- Configura칞칚o Firebase -->
  <script src="firebase-config.js"></script>

  <!-- SweetAlert -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- Agendamentos JS -->
  <script src="js/agendamentos.js"></script>

  <script>
    // Logout seguro
    function logout() {
      if (window.auth) {
        window.auth.signOut().then(() => window.location.href="index.html");
      } else {
        console.error("Auth n칚o inicializado.");
      }
    }

    // Atualiza o nome do usu치rio
    window.auth?.onAuthStateChanged(user => {
      const el = document.getElementById('user-name');
      if (el) el.textContent = user ? (user.displayName || user.email) : 'Usu치rio';
    });
  </script>
</body>
</html>
