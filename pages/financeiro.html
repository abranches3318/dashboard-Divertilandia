<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Financeiro | Divertilandia</title>

  <link rel="stylesheet" href="../css/dashboard.css">
  <meta name="viewport" content="width=device-width,initial-scale=1">
</head>

<body>

<button class="btn-hamburger">‚ò∞</button>

<aside class="sidebar">
  <div class="logo">
    <img src="../img/logo.png" class="logo-img">
  </div>

  <nav>
    <ul>
      <li onclick="nav('dashboard')">üìä Dashboard</li>
      <li onclick="nav('agendamentos')">üìÖ Agendamentos</li>
      <li onclick="nav('catalogo')">üéà Cat√°logo</li>
      <li class="active" onclick="nav('financeiro')">üí∞ Financeiro</li>
      <li onclick="nav('monitores')">üßë‚Äçüè´ Monitores</li>
      <li onclick="nav('tarefas')">üìù Tarefas</li>
      <li onclick="nav('conversas')">üí¨ Conversas</li>
      <li onclick="logout()">üö™ Sair</li>
    </ul>
  </nav>
</aside>

<main class="content financeiro">
  <header class="topbar">
    <h1>Financeiro</h1>
  </header>

<!-- TOPO DE ABAS + FILTRO -->
<div class="catalogo-topbar financeiro-toolbar">

  <!-- ABAS -->
  <div class="financeiro-tabs">
    <button class="tab-btn active" onclick="abrirFinanceiro('visao')">Vis√£o Geral</button>
    <button class="tab-btn" onclick="abrirFinanceiro('entradas')">Entradas</button>
    <button class="tab-btn" onclick="abrirFinanceiro('saidas')">Sa√≠das</button>
    <button class="tab-btn" onclick="abrirFinanceiro('balanco')">Balan√ßo</button>
     <button class="tab-btn" onclick="abrirFinanceiro('projecao')">Proje√ß√£o</button>
    <button class="tab-btn" onclick="abrirFinanceiro('relatorios')">Relat√≥rios</button>
  </div>

 <!-- filtros √† direita -->
  <div class="financeiro-filtros">

   <div class="financeiro-ano-wrapper" id="filtro-ano-wrapper">
  <select id="filtro-ano" class="financeiro-select"></select>
</div>

    <div class="financeiro-mes-wrapper" id="filtro-mes-wrapper">
      <select id="filtro-mes" class="financeiro-select">
        
         <option value="0">Janeiro</option>
  <option value="1">Fevereiro</option>
  <option value="2">Mar√ßo</option>
  <option value="3">Abril</option>
  <option value="4">Maio</option>
  <option value="5">Junho</option>
  <option value="6">Julho</option>
  <option value="7">Agosto</option>
  <option value="8">Setembro</option>
  <option value="9">Outubro</option>
  <option value="10">Novembro</option>
  <option value="11">Dezembro</option>
      </select>
    </div>

    <div class="financeiro-periodo-wrapper">
      <select id="filtro-periodo" class="financeiro-select">
        <option value="mensal">Mensal</option>
        <option value="anual">Anual</option>
      </select>
    </div>

  </div>
</div>

</div>
  
<section id="visao" class="financeiro-section active">
  <!-- CARDS (O QUE VOC√ä J√Å FEZ) -->
  <div class="financeiro-cards">

    <div class="financeiro-card entrada">
      <span class="label">Entradas</span>
      <strong id="kpi-entradas">R$ 0,00</strong>
    </div>

    <div class="financeiro-card saida">
      <span class="label">Sa√≠das</span>
      <strong id="kpi-saidas">R$ 0,00</strong>
    </div>

    <div class="financeiro-card destaque">
      <span class="label">Lucro</span>
      <strong id="kpi-lucro">R$ 0,00</strong>
    </div>

    <div class="financeiro-card">
      <span class="label">Saldo Atual</span>
      <strong id="kpi-saldo">R$ 0,00</strong>
    </div>

   <div class="financeiro-card agendamentos">
  <span class="label">Agendamentos</span>
  <strong id="kpi-agendamentos">0</strong>
</div>

    <div class="financeiro-card">
      <span class="label">√Ä Receber</span>
      <strong id="kpi-projecao">‚Äì</strong>
    </div>

  </div>

  <!-- GR√ÅFICO PRINCIPAL -->
  <div class="financeiro-graficos-wrapper">
  <div class="financeiro-bloco">
    <h3>Entradas x Sa√≠das x Saldo</h3>
    <canvas id="graficoFinanceiro"></canvas>
  </div>

  <!-- GR√ÅFICOS SECUND√ÅRIOS -->
  <div class="financeiro-graficos-secundarios">

    <div class="financeiro-bloco">
      <h3>Eventos por Per√≠odo</h3>
      <canvas id="graficoEventos"></canvas>
    </div>

    <div class="financeiro-bloco">
      <h3>Distribui√ß√£o de Gastos</h3>
      <canvas id="graficoGastos"></canvas>
    </div>
</div>
  </div>

</section>
 <section id="entradas" class="financeiro-section">

  <div class="entradas-container">

    <!-- TOPO DA SE√á√ÉO -->
    <div class="entradas-header">

      <div class="entradas-filtros">

        <select id="filtro-categoria-entrada" class="financeiro-select">
          <option value="todas">Todas categorias</option>
          <option value="sinal">Sinal (Entrada antecipada)</option>
          <option value="integral">Pagamento integral antecipado</option>
          <option value="pagamento_agendamento">Pagamento agendamento</option>
          <option value="restante">Pagamento restante</option>
        </select>

      </div>

      <div class="entradas-total-periodo">
        <span>Total do per√≠odo:</span>
        <strong id="total-entradas-periodo">R$ 0,00</strong>
      </div>

    </div>

    <!-- TABELA MODERNA -->
    <div class="entradas-tabela-wrapper">

      <table class="entradas-tabela">

        <thead>
          <tr>
            <th>Data</th>
            <th>Cliente</th>
            <th>Evento</th>
            <th>Categoria</th>
            <th>Valor</th>
          </tr>
        </thead>

        <tbody id="tabela-entradas-body">
          <!-- JS vai inserir linhas aqui -->
        </tbody>

      </table>

    </div>

    <!-- RODAP√â -->
    <div class="entradas-footer">
      <div class="entradas-total-geral">
        <span>Total exibido:</span>
        <strong id="total-entradas-filtrado">R$ 0,00</strong>
      </div>
    </div>

  </div>

</section>
<section id="saidas" class="financeiro-section">

  <div class="saidas-container">

    <!-- TOPO -->
    <div class="saidas-header">

      <div class="saidas-filtros">

        <select id="filtro-categoria-saida" class="financeiro-select">
          <option value="todas">Todas categorias</option>
          <option value="transporte">Transporte</option>
          <option value="funcionarios">Funcion√°rios</option>
          <option value="equipamentos">Equipamentos</option>
          <option value="aluguel">Aluguel</option>
          <option value="impostos">Impostos</option>
          <option value="financeiro">Financeiro</option>
        </select>

        <select id="filtro-natureza-saida" class="financeiro-select">
          <option value="todas">Todas naturezas</option>
          <option value="pontual">Pontual</option>
          <option value="fixa">Fixa</option>
          <option value="parcelada">Parcelada</option>
        </select>

        <select id="filtro-status-saida" class="financeiro-select">
          <option value="todas">Todos status</option>
          <option value="em_aberto">Em aberto</option>
          <option value="atraso">Em atraso</option>
          <option value="pago">Pago</option>
          <option value="cancelado">Cancelado</option>
          <option value="renegociado">Renegociado</option>
        </select>

      </div>

       <div class="saidas-acoes">
    <button id="btn-nova-saida" class="btn-primario">
      + Inserir nova sa√≠da
    </button>
  </div>

      <div class="saidas-total-periodo">
        <span>Total do per√≠odo:</span>
        <strong id="total-saidas-periodo">R$ 0,00</strong>
      </div>

    </div>

    <!-- TABELA -->
    <div class="saidas-tabela-wrapper">

      <table class="saidas-tabela">

        <thead>
          <tr>
            <th>Compet√™ncia</th>
            <th>Vencimento</th>
            <th>Categoria</th>
            <th>Natureza</th>
            <th>Status</th>
            <th>Valor</th>
            <th>A√ß√£o</th>
          </tr>
        </thead>

        <tbody id="tabela-saidas-body">
          <!-- JS insere aqui -->
        </tbody>

      </table>

    </div>

    <!-- RODAP√â -->
    <div class="saidas-footer">
      <div class="saidas-total-geral">
        <span>Total exibido:</span>
        <strong id="total-saidas-filtrado">R$ 0,00</strong>
      </div>
    </div>

  </div>

</section>

  <!-- MODAL NOVA SA√çDA -->
<div id="modal-nova-saida" class="modal-overlay">

  <div class="modal-saida">

    <div class="modal-header">
      <h3>Nova Sa√≠da</h3>
      <button id="fechar-modal-saida" class="modal-close">√ó</button>
    </div>

    <form id="form-nova-saida" class="modal-body">

      <div class="form-grid">

        <div class="form-group">
          <label>Categoria</label>
          <select id="saida-categoria" required>
            <option value="">Selecione</option>
            <option value="transporte">Transporte</option>
            <option value="funcionarios">Funcion√°rios</option>
            <option value="equipamentos">Equipamentos</option>
            <option value="aluguel">Aluguel</option>
            <option value="impostos">Impostos</option>
            <option value="financeiro">Financeiro</option>
          </select>
        </div>

        <div class="form-group">
          <label>Natureza</label>
          <select id="saida-natureza" required>
            <option value="pontual">Pontual</option>
            <option value="fixa">Fixa</option>
            <option value="parcelada">Parcelada</option>
          </select>
        </div>

        <div class="form-group">
          <label>Valor</label>
          <input type="number" id="saida-valor" step="0.01" required>
        </div>

        <div class="form-group">
          <label>Compet√™ncia</label>
          <input type="date" id="saida-competencia" required>
        </div>

        <div class="form-group">
          <label>Vencimento</label>
          <input type="date" id="saida-vencimento" required>
        </div>

        <div class="form-group">
          <label>Descri√ß√£o</label>
          <input type="text" id="saida-descricao">
        </div>

        <!-- Parcelamento -->
        <div class="form-group parcelamento-group" style="display:none;">
          <label>Total de Parcelas</label>
          <input type="number" id="saida-total-parcelas" min="2">
        </div>

      </div>

      <div class="modal-footer">
        <button type="submit" class="btn-primario">
          Salvar
        </button>
      </div>

    </form>

  </div>

</div>


<section id="balanco" class="financeiro-section"></section>
<section id="projecao" class="financeiro-section"></section>
<section id="relatorios" class="financeiro-section"></section>
</main>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
<script src="../firebase-config.js"></script>

<!-- Navega√ß√£o -->
<script src="../js/nav.js"></script>

<!-- FINANCEIRO -->
<script src="../js/financeiro/visao_geral.js"></script>
  <script src="../js/financeiro/entradas.js"></script>
<script src="../js/financeiro/saidas.js"></script> 

<!-- GRAFICOS -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</body>
</html>
