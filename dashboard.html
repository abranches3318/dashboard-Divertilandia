<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard - Divertilﾃ｢ndia</title>

  <!-- CSS -->
  <link rel="stylesheet" href="css/dashboard.css" />
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.4/index.global.min.css" rel="stylesheet">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>

  <script src="firebase-config.js"></script>
  <script src="protect.js"></script>
</head>

<body>

  <!-- Botﾃ｣o Hamburger -->
  <button class="btn-hamburger" onclick="document.querySelector('.sidebar').classList.toggle('active')">
    笘ｰ
  </button>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">
      <img src="img/logo.png" class="logo-img" alt="Divertilﾃ｢ndia" />
    </div>

    <nav>
      <ul>
        <li class="active" onclick="nav('dashboard')">沒 Dashboard</li>
        <li onclick="nav('agendamentos')">沒 Agendamentos</li>
        <li onclick="nav('financeiro')">汳ｰ Financeiro</li>
        <li onclick="nav('itens')">沁 Itens / Catﾃ｡logo</li>
        <li onclick="nav('pacotes')">沁 Pacotes</li>
        <li onclick="nav('monitores')">洫鯛昨沛ｫ Monitores</li>
        <li onclick="nav('tarefas')">沒 Tarefas</li>
        <li onclick="nav('conversas')">汳ｬ Conversas (tempo real)</li>
        <li onclick="logout()">泅ｪ Sair</li>
      </ul>
    </nav>
  </aside>

  <!-- Conteﾃｺdo -->
  <main class="content">

    <!-- Navbar -->
    <header class="topbar">
      <h1 id="titulo-pagina">Dashboard</h1>
      <div class="top-right">
        <div class="notif" onclick="abrirNotificacoes()">
          沐 <span id="notif-count">0</span>
        </div>
        <div class="user-info">
          <span id="user-name">Usuﾃ｡rio</span>
        </div>
      </div>
    </header>

    <!-- SEﾃﾃグ DASHBOARD -->
    <section id="pagina-dashboard" class="pagina ativa">
      <div class="cards">
        <div class="card">
          <h3>Agendamentos Hoje</h3>
          <p id="ag-hoje">0</p>
        </div>
        <div class="card">
          <h3>Receita Mensal</h3>
          <p id="receita-mes">R$ 0,00</p>
        </div>
        <div class="card">
          <h3>Tarefas Pendentes</h3>
          <p id="tarefas-pendentes">0</p>
        </div>
      </div>
      <div class="panel">
        <h2>沒 Calendﾃ｡rio</h2>
        <div id="calendar"></div>
      </div>
    </section>

    <!-- ========================================= -->
<!--              PAGINA: AGENDAMENTOS         -->
<!-- ========================================= -->
<section id="pagina-agendamentos" class="pagina" style="display:none">

    <div class="topo-secao">
        <h2>Agendamentos</h2>
        <button id="btnNovoAgendamento" class="btn-primario">+ Novo Agendamento</button>
    </div>

    <!-- FILTROS -->
    <div class="filtros-agendamentos">

        <div class="campo-filtro">
            <label for="filtroData">Data</label>
            <input type="date" id="filtroData">
        </div>

        <div class="campo-filtro">
            <label for="filtroCliente">Cliente</label>
            <input type="text" id="filtroCliente" placeholder="Nome do cliente">
        </div>

        <div class="campo-filtro">
            <label for="filtroTelefone">Telefone</label>
            <input type="text" id="filtroTelefone" placeholder="(DDD) 9XXXX-XXXX">
        </div>

        <div class="campo-filtro">
            <label for="filtroStatus">Status</label>
            <select id="filtroStatus">
                <option value="">Todos</option>
                <option value="pendente">Pendente</option>
                <option value="confirmado">Confirmado</option>
                <option value="concluido">Concluﾃｭdo</option>
                <option value="cancelado">Cancelado</option>
            </select>
        </div>

        <button id="btnFiltrarAgendamentos" class="btn-secundario">Filtrar</button>
    </div>

    <!-- LISTA DE AGENDAMENTOS -->
    <table class="tabela-agendamentos">
        <thead>
            <tr>
                <th>Data</th>
                <th>Cliente</th>
                <th>Telefone</th>
                <th>Status</th>
                <th>Valor</th>
                <th>Aﾃｧﾃｵes</th>
            </tr>
        </thead>
        <tbody id="listaAgendamentos">
            <!-- Linhas inseridas via JS -->
        </tbody>
    </table>

</section>

    <!-- SEﾃﾃグ FINANCEIRO -->
    <section id="pagina-financeiro" class="pagina">
      <h2>Financeiro</h2>
      <div class="grid-3">
        <div class="card"><small class="small">Receita</small><h3 id="fin-receita">R$0,00</h3></div>
        <div class="card"><small class="small">Pagamentos pendentes</small><h3 id="fin-pend">0</h3></div>
        <div class="card"><small class="small">Despesas</small><h3 id="fin-desp">R$0,00</h3></div>
      </div>
      <div class="card" id="fin-chart">(Grﾃ｡ficos em breve)</div>
    </section>

    <!-- SEﾃﾃグ ITENS / CATﾃ´OGO -->
    <section id="pagina-itens" class="pagina">
      <h2>Itens / Catﾃ｡logo</h2>
      <div id="itens-lista"></div>
    </section>

    <!-- SEﾃﾃグ PACOTES -->
    <section id="pagina-pacotes" class="pagina">
      <h2>Pacotes</h2>
      <div id="pacotes-lista"></div>
    </section>

    <!-- SEﾃﾃグ MONITORES -->
    <section id="pagina-monitores" class="pagina">
      <h2>Monitores</h2>
      <div id="container-monitores" class="lista-monitores"></div>
    </section>

    <!-- SEﾃﾃグ TAREFAS -->
    <section id="pagina-tarefas" class="pagina">
      <h2>Tarefas</h2>
      <div id="tarefas-lista"></div>
    </section>

    <!-- SEﾃﾃグ CONVERSAS -->
    <section id="pagina-conversas" class="pagina">
      <h2>Conversas (Tempo real)</h2>
      <div id="conversas-lista"></div>
    </section>

    <!-- SEﾃﾃグ NOTIFICAﾃﾃ髭S (interna para abrirNotificacoes) -->
    <section id="pagina-notificacoes" class="pagina">
      <h2>Notificaﾃｧﾃｵes</h2>
      <div id="notificacoes-lista"></div>
    </section>

  </main>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.4/index.global.min.js"></script>
  <script src="js/calendar.js"></script>
  <script src="js/agendamentos.js"></script>
  <script src="js/dashboard.js"></script>
  <script src="js/monitor.js"></script>
  <script src="js/checklist.js"></script>
  <script src="js/ordemServico.js"></script>
  <script src="js/tarefas.js"></script>
  <script src="js/notificacoes.js"></script>

  <script>
    function logout() {
      firebase.auth().signOut().then(() => {
        window.location.href = "index.html";
      });
    }

    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        document.getElementById('user-name').textContent = user.displayName || user.email;
      }
    });
  </script>

</body>
</html>
